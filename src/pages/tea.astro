---
import ContentLayout from "../layouts/ContentLayout.astro";

interface Tea {
  name: string;
  country: Country;
  region?: string;
  flush?: number;
  price?: number;
  rating: number;
  comment?: string;
  link?: string;
  original_label?: string;
}

enum Flush {
  Spring,
  Summer,
}

enum Price {
  Low,
  Medium,
  High,
}

enum Country {
  India,
  Japan,
}

const teas: { category: string, items: Tea[] }[] = [
  {
    category: "Black teas",
    items: [
      {
        name: "Dejoo",
        country: Country.India,
        region: "Assam",
        price: Flush.Spring,
        rating: 2,
        comment: "Standard black tea, best used for masala or other milk teas.",
        original_label:
          'StÅ™ednÃ­ tÅ™Ã­da assÃ¡mskÃ©ho ÄernÃ©ho Äaje typu broken, plnÃ¡, lehce natrpklÃ¡ chuÅ¥, vhodnÃ½ k bÄ›Å¾nÃ©mu popÃ­jenÃ­ s mlÃ©kem a medem Äi k pÅ™Ã­pravÄ› Yogi (indickÃ©ho "bÃ­lÃ©ho" Äaje).',
      },
      {
        name: "Sungma DJ 05/2025",
        country: Country.India,
        region: "Darjeeling",
        flush: Flush.Spring,
        price: Price.High,
        rating: 4,
        comment:
          "Great black tea, fresh flavor and with hints of herbs and spices.",
      },
      {
        name: "Puttabong DJ 42/2025",
        country: Country.India,
        region: "Darjeeling",
        flush: Flush.Spring,
        price: Price.High,
        rating: 4,
      },
    ],
  },
  {
    category: "Other teas",
    items: [
      {
        name: "Karigane (Asanoka)",
        country: Country.Japan,
        region: "Kagoshima, Kirishima",
        flush: Flush.Spring,
        rating: 1,
        comment: "These teas are probably not my thing...",
        link: "https://www.caj.cz/japan-kagoshima-kirishima-shincha-asanoka~z464-000374.html",
      },
    ],
  },
];

const countries = {
  [Country.India]: ["India", "ğŸ‡®ğŸ‡³"],
  [Country.Japan]: ["Japan", "ğŸ‡¯ğŸ‡µ"],
} as const;

const flushes = ["Spring/Early", "Summer/Late"];
const ratings = [
  "ğŸš®",
  "Probably never again",
  "Medium, but still fine",
  "Would buy again",
  "Love it",
];
---

<ContentLayout pageId="projects" pageTitle="Teas" fullscreen={true}>
  <div class="mb-4">
    <h3>Ratings legend:</h3>
    <ul>
      <li>â­â­â­â­â­ - Love it</li>
      <li>â­â­â­â­ - Would buy again</li>
      <li>â­â­â­ - Depends on the day</li>
      <li>â­â­ - Never again</li>
      <li>â­ - ğŸš®</li>
    </ul>
  </div>
  {
    teas.map((t) => (
      <div class="mb-4">
        <h3 class="mb-3">{t.category}</h3>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Country</th>
              <th>Region</th>
              <th>Flush</th>
              <th>Price</th>
              <th>Rating</th>
              <th>Comment</th>
            </tr>
          </thead>
          <tbody>
            {t.items
              .sort((a, b) => {
                if (a.country < b.country) {
                  return -1;
                } else if (a.country > b.country) {
                  return 1;
                } else {
                  return 0;
                }
              })
              .map((tea) => (
                <tr>
                  <td title={tea.original_label}>
                    {tea.link ? (
                      <a href={tea.link} target="_blank">
                        {tea.name}
                      </a>
                    ) : (
                      tea.name
                    )}
                  </td>
                  <td style="white-space: nowrap">
                    {countries[tea.country].join(" ")}
                  </td>
                  <td>{tea.region}</td>
                  <td>{tea.flush === undefined ? "-" : flushes[tea.flush]}</td>
                  <td>{tea.price ? "ğŸ’²".repeat(tea.price + 1) : "-"}</td>
                  <td>{ratings[tea.rating]}</td>
                  <td>
                    <i>{tea.comment ?? "No comment"}</i>
                  </td>
                </tr>
              ))}
          </tbody>
        </table>
      </div>
    ))
  }
</ContentLayout>

<style>
  table,
  th,
  td {
    border: 1px solid var(--ctp-overlay0);
    border-collapse: collapse;
  }

  table {
    width: 100%;
    text-align: left;
  }

  th,
  td {
    padding: 0.5rem;
  }
</style>
